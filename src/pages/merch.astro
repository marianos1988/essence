---
import { getCollection } from "astro:content";
import BackgroundEffects10 from "../components/merch/BackgroundEffects10.astro";
import MerchGeneral from "../components/merch/MerchGeneral";
import Layout from "../layouts/Layout.astro";
import Footer from "../components/Footer.astro";



const getProducts = await getCollection("products");


// Lista de categorias
let arrCategories:any = [];

// Lista de productos
let arrProducts:any = [];



getProducts.map(
    (product) => {

        // Selecciona nombres categorias
        arrCategories.push(product.data.categoria)

        //Agrega lista de productos
        arrProducts.push({
            id: product.slug,
            name: product.data.nombre,
            price: product.data.precio,
            images: product.data.images,
            category: product.data.categoria,
            description: product.body
        })

        
    }
);


const listCategories = [...new Set(arrCategories)]; // Eliminar repetidos






---

<Layout>
    <BackgroundEffects10>
        <MerchGeneral 
            client:load 
            categories = {listCategories}
            products = {arrProducts}
        />


    </BackgroundEffects10>
    <Footer 
        page="merch"
    /> 
</Layout>

