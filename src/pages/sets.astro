---

import BtnWhatsapp from "../components/BtnWhatsapp.astro";
import Footer from "../components/Footer.astro";
import BackgroundEffects from "../components/sets/BackgroundEffects7.astro";
import Layout from "../layouts/Layout.astro";
import { getCollection, render } from "astro:content";




const collection = await getCollection("sets");


const entries = await Promise.all(
  collection.map(async (post) => {
    const { Content } = await post.render();
    return {
      slug: post.slug,
      data: post.data,   // metadatos del schema
      Content,           // body renderizable
    };
  })
);

const sortedBySlug = entries.sort((a, b) => b.slug.localeCompare(a.slug));
---
 
<Layout>
    <BtnWhatsapp />
    <BackgroundEffects>
        <section class="container-sets">
            <div class="box-tittle">
                <h1>Sets</h1>
            </div>
            <div class="container">
                
                {   
                    sortedBySlug.map(
                        ({data, Content}) => (
                            <div class="card">
                                <div class="box-video">
                                        <iframe 
                                            width="100%" 
                                            height="100%" 
                                            src={`https://www.youtube.com/embed/${data.link}`} 
                                            title={data.nombre} 
                                            frameborder="0"
                                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                            allowfullscreen>
                                        </iframe>
                                </div>
                                
                                <div class="card-content">
                                        <h3><Content /></h3>
                                </div>
                            </div>
                        )
                    )
                }

            </div>
        </section>
    </BackgroundEffects>
    <Footer
        page="sets"
    />
</Layout>


<style>
    .box-tittle {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .box-tittle h1 {
        font-size: 45px;
        font-family: "Neo-latina" ,sans-serif;
        color: #fff;
    }

    .container {
        
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 30px;
        padding: 80px 40px 40px 80px;
    }

    .card {

        background: transparent;
        border-radius: 15px;
        z-index: 5;
        border: 3px solid #0FF0FC ;
        font-family: "Cocogoose" ,sans-serif;
        /* height: 633px; */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 0px 0 20px 0;
    }
 
    .card > .box-video {


    width: 500px;
    aspect-ratio: 4/3;

    border-radius: 16px 16px 0 0;
    transition: all 0.6s cubic-bezier(0.43, 0.41, 0.22, 0.91);
    z-index: 10;
    cursor: pointer;
    }

.card > .box-video:hover {

}

.box-video iframe {
    border-radius: 15px;

} 
.card-content {

    background: transparent;
    display: flex !important;
    justify-content: center;
    align-items:center ;
    font-size: 1rem !important;
    text-align: center !important;
    font-weight: 600 !important;
    margin: 55px 0!important;
    max-width: 450px !important;
    color: #0FF0FC !important;
    background-color: #000 !important;
    padding: 6px !important;
    border-radius: 10px !important;
    border: #fff 1px solid !important;
    
}


@media (min-width:300px) AND (max-width:400px) {

    .container {
        width: 98%;
        gap: 40px;
        padding: 0;
        margin: auto;
    }
    .card {

        width: 100%;
        margin-bottom: 30px;
        height: inherit !important;

    }
    .box-video  {
        width: 100% !important;

    }
    .card-content {
        font-size: .5rem;
        max-width: 90% !important;
    }
}

@media (min-width:400px) AND (max-width:570px) {

    .container {
        width: 98%;
        gap: 40px;
        padding: 0;
        margin: auto;
    };
    .card {

        width: 100%;
        margin-bottom: 30px;

    }
    .box-video  {
        width: 100% !important;

    }
    .card-content {
        font-size: .7rem;
        max-width: 90% !important;
    }
}
    
</style>